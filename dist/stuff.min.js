(function(t){"use strict";function e(e,n){function o(){r.removeEventListener("load",o),i.handshake(),n(i)}var r=document.createElement("iframe"),i=new s(r);t.addEventListener("message",i.messageHandler.bind(i),!1),a.push(r),r.setAttribute("scrolling","no"),r.setAttribute("src",e),r.addEventListener("load",o,!1),document.querySelector("body").appendChild(r)}function s(t){this.iframe=t,this.callbacks={},this.secret=Math.ceil(999999999*Math.random())+1}var a=[],n=function(){};e.clear=function(){a.forEach(function(t){document.querySelector("body").removeChild(t)}),a=[]},s.prototype.messageHandler=function(t){var e;try{e=JSON.parse(t.data)}catch(s){return}if(e.secret===this.secret){var a=e.data,n=e.type;this.callbacks[n]&&this.callbacks[n](a)}},s.prototype.post=function(t,e){this.iframe.contentWindow.postMessage(JSON.stringify({type:t,data:e,secret:this.secret}),"*")},s.prototype.evaljs=function(e,s){this.callbacks.evaljs=function(e){var a,o=e.error;if(o){var r=t[o.errorType];a=new r(o.message),a.stack=o.stack,a.type=o.type,a.arguments=o.arguments}(s||n)(a,e.result)},this.post("evaljs",e)},s.prototype.load=function(t,e){this.callbacks.load=e||n,this.post("load",t)},s.prototype.html=function(t){this.callbacks.html=t||n,this.post("html",null)},s.prototype.handshake=function(){this.post("handshake",this.secret)},e.Context=s,t.stuff=e})(this);